import{_ as z}from"./Arrow.3a88ceff.js";import{d as L,t as D,p as g,m as $,o as d,c as b,a as p,f as s,s as F,v as H,x as O,h as B,y as f,z as J,A as Q,F as R,r as X,B as q,b as C,C as W,D as Y,E as Z,j as S,w as ee,e as te,g as V,n as A,_ as oe,i as ne,k as se,l as ae}from"./entry.1d18b849.js";import{q as le}from"./query.a6818c77.js";import{g as ce}from"./get-slug.5d6c9bae.js";import"./preview.b1e48a58.js";const re=["href","onClick"],ue=["src"],ie=L({__name:"PhotoItem",props:{photo:{}},emits:["click"],setup(u,{emit:c}){const m=u,{photo:l}=D(m),v=c,t=g(()=>l.value.width<l.value.height),n=g(()=>$(l.value.url,"c_limit,h_410,w_410")),r=g(()=>$(l.value.url)),o=g(()=>`padding-bottom: ${Math.round(l.value.height/l.value.width*100)}%`);function i(){v("click")}return(_,y)=>(d(),b("div",null,[p("div",{class:O(["photo",{horizontal:s(t)}])},[p("a",{href:s(r),class:"wrapper",style:F(s(o)),onClick:H(i,["prevent"])},[p("img",{src:s(n),alt:""},null,8,ue)],12,re)],2)]))}});const _e=B(ie,[["__scopeId","data-v-3fb8e5dc"]]),de=u=>(Y("data-v-37f3ca3f"),u=u(),Z(),u),pe={class:"lightbox"},ve=["src"],he=["aria-label"],me=de(()=>p("span",null,null,-1)),fe=[me],ge=["aria-label"],ye=["aria-label"],be=L({__name:"Lightbox",props:{photo:{},photos:{}},emits:["close"],setup(u,{emit:c}){const m=u,l=c,{photo:v,photos:t}=D(m),n=f(-1),r=f(!1),o=f("0"),i=f(0),_=f(void 0),y=f([]),P=g(()=>t.value.map(e=>e.url)),I=g(()=>[t.value[h(n.value-1)],t.value[h(n.value)],t.value[h(n.value+1)]]);function h(e){return e<0?t.value.length+e:(e>=t.value.length&&(e=e%t.value.length),e)}function E(e){switch(e.key){case"Escape":l("close");break;case"ArrowRight":k(1);break;case"ArrowLeft":k(-1);break}}function k(e){r.value||(r.value=!0,o.value=`${e*-100}vw`,new Promise(a=>{setTimeout(a,150)}).then(()=>{r.value=!1,W().then(()=>{o.value="0",n.value=h(n.value+e)})}))}function j(){_.value||r.value||k(1)}function M(e){i.value=0,_.value=e.touches[0].clientX}function U(e){_.value!==void 0&&(i.value=_.value-e.touches[0].clientX,o.value=`${-i.value}px`)}function N(){if(_.value!==void 0){if(Math.abs(i.value)<50){o.value="0",i.value=0,_.value=void 0;return}k(i.value>0?1:-1)}}function K(){[-2,-1,0,1,2].map(e=>{const a=h(n.value+e);G(t.value[a])})}function G(e){if(y.value.find(w=>w===e.url))return;const a=new Image;a.addEventListener("load",()=>{y.value.push(e.url)}),a.src=$(e.url)}return J(()=>{document.addEventListener("keyup",E),document.addEventListener("touchstart",M,{passive:!0}),document.addEventListener("touchmove",U,{passive:!0}),document.addEventListener("touchend",N,{passive:!0}),document.body.classList.add("overflow-hidden"),n.value=P.value.indexOf(v.value.url),K()}),Q(()=>{document.body.classList.remove("overflow-hidden"),document.removeEventListener("keyup",E),document.removeEventListener("touchstart",M),document.removeEventListener("touchmove",U),document.removeEventListener("touchend",N)}),(e,a)=>{const w=z;return d(),b("div",pe,[s(n)>=0?(d(),b("div",{key:0,onClick:j},[(d(!0),b(R,null,X(s(I),(x,T)=>(d(),b("div",{class:O(["photo",{previous:T===0,current:T===1,next:T===2,transition:s(r)}]),style:F(`transform: translateX(${s(o)})`),key:x.url},[p("img",{src:s($)(x.url)},null,8,ve)],6))),128))])):q("",!0),p("button",{type:"button",class:"close",onClick:a[0]||(a[0]=x=>e.$emit("close")),"aria-label":e.$t("lightbox.close")},fe,8,he),p("button",{type:"button",class:"arrow previous",onClick:a[1]||(a[1]=x=>k(-1)),"aria-label":e.$t("lightbox.prev")},[C(w,{direction:"left",animate:!1})],8,ge),p("button",{type:"button",class:"arrow next",onClick:a[2]||(a[2]=x=>k(1)),"aria-label":e.$t("lightbox.next")},[C(w,{direction:"right",animate:!1})],8,ye)])}}});const ke=B(be,[["__scopeId","data-v-37f3ca3f"]]),xe={class:"wrapper"},$e={class:"title"},we={class:"photos"},Ce=L({__name:"PhotographyCategory",props:{category:{}},setup(u){const c=u,{locale:m}=S(),l=g(()=>m.value==="en"?c.category.title_en:c.category.title_pl),v=f(!1),t=f(void 0);function n(o){t.value=o,v.value=!0}function r(){v.value=!1}return(o,i)=>{const _=z,y=oe,P=_e,I=ke;return d(),b("div",xe,[C(y,{to:"/",class:"back"},{default:ee(()=>[C(_,{direction:"left",animate:!0}),te(" "+V(o.$t("common.back")),1)]),_:1}),p("h1",$e,V(s(l)),1),p("div",we,[(d(!0),b(R,null,X(o.category.photos,h=>(d(),A(P,{key:h.url,photo:h,onClick:E=>n(h)},null,8,["photo","onClick"]))),128))]),s(t)&&s(v)?(d(),A(I,{key:0,photo:s(t),photos:o.category.photos,onClose:r},null,8,["photo","photos"])):q("",!0)])}}});const Le=B(Ce,[["__scopeId","data-v-cd58c876"]]),Ae=L({__name:"[slug]",async setup(u){let c,m;const l=ne(),v=ce(l.path),t=([c,m]=se(()=>le("photography").where({_path:`/photography/${v}`}).findOne()),c=await c,m(),c),{t:n}=S(),{locale:r}=S(),o=g(()=>r.value==="en"?t.title_en:t.title_pl);return ae({title:`${o.value} - ${n("common.title")}`,ogTitle:`${o.value} - ${n("common.title")}`,ogImage:$(t.background,"c_fill,h_630,w_1200")}),(i,_)=>{const y=Le;return d(),A(y,{category:s(t)},null,8,["category"])}}});export{Ae as default};
